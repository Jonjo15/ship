(()=>{"use strict";var e={489:(e,t,r)=>{r.d(t,{H:()=>o});const i={playerGrid:document.querySelector(".playerGrid"),playerSquares:document.querySelectorAll(".playerGrid div"),aiSquares:document.querySelectorAll(".cpuGrid div"),cpuGrid:document.querySelector(".cpuGrid"),startBtn:document.querySelector("#startBtn"),info:document.querySelector(".info"),resetBtn:document.getElementById("resetBtn"),remShipsPlayer:document.querySelector(".remShipsPlayer"),remShipsAi:document.querySelector(".remShipsAi"),selectGrid:document.querySelector(".selectShipsGrid"),directionBtn:document.querySelector("#directionBtn"),selectShips:[...document.querySelectorAll(".selectShipsGrid div")].filter((e=>e.hasAttribute("draggable")))},a=e=>{const t=new Array(e).fill(!1);return{getLength:()=>e,hit:e=>(t[e]=!0,t),isSunk:()=>t.every((e=>e)),getHitArray:()=>t}},s=(e=!1)=>{let t,r,i,s=((e=!1)=>{const t=[];let r=0,i=15;for(let e=1;e<6;e++)t.push(a(e));let s=new Array(100).fill(!1);const n=(e,t,r=!0)=>{let i,a=e.getLength();if(r){let e;i=o(a);for(let r=0;r<a;r++)e=i+r+"-"+t+r,s[i+r]=e,e=""}else{let e;i=l(a);for(let r=0;r<a;r++){let a=10*r;e=i+a+"-"+t+r,s[i+a]=e,e=""}}},o=e=>{let t=Math.floor(100*Math.random()),r=[];if(t%10+e<=10){for(let i=0;i<e;i++)r.push(s[t+i]);return r.every((e=>!1===e))?t:o(e)}return o(e)},l=e=>{let t=10*(e-1),r=Math.floor(100*Math.random()-t),i=[];for(let t=0;t<e;t++){let e=10*t;i.push(s[r+e])}return i.every((e=>!1===e))?r:l(e)};return{boardArray:s,setIsHorizontal:e=>e,ships:t,receiveAttack:e=>{if("miss"===s[e]||"hit"===s[e])return 0;if(!1===s[e])return s[e]="miss",r+=1,!1;if("string"==typeof s[e]){let r=parseInt(s[e].slice(-1)),a=parseInt(s[e].slice(-2,-1));return t[a].hit(r),s[e]="hit",i-=1,!0}},getMissedCount:()=>r,allShipsSunk:()=>t.every((e=>e.isSunk())),placeShipsRandomly:n,aiPlaceShips:()=>{const e=[!0,!1];t.forEach(((t,r)=>{let i=Math.floor(Math.random()*e.length);n(t,r,e[i])}))},getRemainingShips:()=>i}})(e),n=!0,o=[],l=[];t=!e;const d=e=>{let t,a;return a=0===l.length?Math.floor(100*Math.random()):l.pop(),t=e.receiveAttack(a),0===t?d(e):t?([a+1,a-1,a+10,a-10].filter((e=>{return!((t=e)>99||t<0||o.includes(t));var t})).forEach((e=>l.push(e))),i=t,r=a,o.push(r),!0):(i=t,r=a,o.push(r),!0)};return{isAi:()=>e,getTurn:()=>t,setTurn:e=>t=e,gameboard:s,computerMakeRandomPlay:d,getLastAiAttempt:()=>r,getLastResult:()=>i,getHorizontal:()=>n,setHorizontal:e=>n=e}},n=()=>{const e=e=>{let t=document.createElement("div");t.classList.add("shipContainerHorizontal"),t.classList.add("ship"+e),t.dataset.id=e-1,t.style.width=30*e+"px",t.setAttribute("draggable",!0);for(let r=0;r<e;r++){let i=document.createElement("div");i.dataset.id=""+e+r,t.appendChild(i)}return t};return{renderStart:(t,r)=>{(t=>{console.log(t),t.gameboard.ships.forEach(((t,r)=>{i.selectGrid.appendChild(e(t.getLength()))})),i.selectShips=[...document.querySelectorAll(".selectShipsGrid div")].filter((e=>e.hasAttribute("draggable")))})(t),i.info.textContent="Your Turn",i.remShipsPlayer.textContent="Your ship positions left: "+t.gameboard.getRemainingShips(),i.remShipsAi.textContent="Computer's ship positions left: "+r.gameboard.getRemainingShips(),t.gameboard.boardArray.forEach(((e,t)=>{e?"string"==typeof e&&(i.playerSquares[t].classList.add("ship"+(parseInt(e.slice(-2,-1))+1)),i.playerSquares[t].dataset.shipId=e):i.playerSquares[t].classList.add("emptySquare")})),r.gameboard.boardArray.forEach(((e,t)=>{e?"string"==typeof e&&(i.aiSquares[t].classList.add("emptySquare"),i.aiSquares[t].dataset.shipId=e):i.aiSquares[t].classList.add("emptySquare")}))},changeShipDirection:()=>{i.selectShips.forEach(((e,t)=>{e.classList.contains("shipContainerHorizontal")?(e.classList.remove("shipContainerHorizontal"),e.classList.add("shipContainerVertical"),e.style.height=30*(t+1)+"px",e.style.width="30px"):(e.classList.remove("shipContainerVertical"),e.classList.add("shipContainerHorizontal"),e.style.width=30*(t+1)+"px",e.style.height="30px")}))}}};let o,l=Object.assign(i);function d(e){for(let t=0;t<100;t++){let r=document.createElement("div");r.dataset.id=t,e.appendChild(r)}}d(i.playerGrid),d(i.cpuGrid),l.aiSquares=document.querySelectorAll(".cpuGrid div"),l.playerSquares=document.querySelectorAll(".playerGrid div"),l.startBtn.addEventListener("click",(e=>{o=(()=>{let e=!1,t=s(),r=s(!0);t.gameboard.aiPlaceShips(),r.gameboard.aiPlaceShips();let a,o=!1;const l=()=>t.gameboard.allShipsSunk()?(a="CPU",e=!0,!0):!!r.gameboard.allShipsSunk()&&(a="YOU",e=!0,!0),d=()=>{if(!t.getTurn()){r.computerMakeRandomPlay(t.gameboard);let e=r.getLastResult(),s=r.getLastAiAttempt();e?(i.playerSquares[s].classList.add("hit"),i.remShipsPlayer.textContent="Your ship positions left: "+t.gameboard.getRemainingShips(),l()?i.info.textContent=a+" won":(t.setTurn(!0),i.info.textContent="Your turn")):(i.playerSquares[s].classList.add("miss"),t.setTurn(!0),i.info.textContent="Your turn")}l()},c=e=>{e.forEach((e=>{e.className="",e.hasAttribute("data-ship-id")&&e.removeAttribute("data-ship-id")}))};return{gameLoop:()=>{o||(n().renderStart(t,r),o=!0)},reset:()=>{c(i.aiSquares),c(i.playerSquares),i.selectShips.forEach((e=>{e.remove()})),e=!1,i.info.textContent="",i.remShipsPlayer.textContent="",i.remShipsAi.textContent="",i.startBtn.style.display="inline-block",i.resetBtn.style.display="none",i.playerGrid.classList.remove("gameOver"),i.cpuGrid.classList.remove("gameOver"),i.info.textContent="Your turn"},checkForWin:l,playTurnAi:d,getGameOver:()=>e,playerAttack:s=>{if(!t.getTurn()||e)return;let n=r.gameboard.receiveAttack(s);if(0!==n)if(n){if(i.aiSquares[s].classList.add("hit"),t.setTurn(!1),!l())return i.info.textContent="Ai turn",i.remShipsAi.textContent="Computer's ship positions left: "+r.gameboard.getRemainingShips(),setTimeout((()=>d()),1e3),!0;i.playerGrid.classList.add("gameOver"),i.cpuGrid.classList.add("gameOver"),i.info.textContent=a+" won"}else if(!n)return t.setTurn(!1),i.aiSquares[s].classList.add("miss"),i.info.textContent="Ai turn",setTimeout((()=>d()),1e3),!0}}})(),o.gameLoop(),l.startBtn.style.display="none",l.resetBtn.style.display="inline-block"})),i.aiSquares.forEach((e=>{e.addEventListener("click",(e=>{o.playerAttack(+e.target.dataset.id)}))})),i.resetBtn.addEventListener("click",(e=>o.reset())),i.directionBtn.addEventListener("click",(e=>n().changeShipDirection()))}},t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(489)})();