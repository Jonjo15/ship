(()=>{"use strict";var e={489:(e,t,r)=>{r.d(t,{H:()=>l});const a={playerGrid:document.querySelector(".playerGrid"),playerSquares:document.querySelectorAll(".playerGrid div"),aiSquares:document.querySelectorAll(".cpuGrid div"),cpuGrid:document.querySelector(".cpuGrid"),startBtn:document.querySelector("#startBtn"),info:document.querySelector(".info"),resetBtn:document.getElementById("resetBtn")},s=e=>{const t=new Array(e).fill(!1);return{getLength:()=>e,hit:e=>(t[e]=!0,t),isSunk:()=>t.every((e=>e)),getHitArray:()=>t}},i=(e=!1)=>{let t,r,a,i=((e=!1)=>{const t=[];let r=0;for(let e=1;e<6;e++)t.push(s(e));let a=new Array(100).fill(!1);const i=(e,t,r=!0)=>{let s,i=e.getLength();if(r){let e;s=n(i);for(let r=0;r<i;r++)e=s+r+"-"+t+r,a[s+r]=e,e=""}else{let e;s=l(i);for(let r=0;r<i;r++){let i=10*r;e=s+i+"-"+t+r,a[s+i]=e,e=""}}},n=e=>{let t=Math.floor(100*Math.random()),r=[];if(t%10+e<=10){for(let s=0;s<e;s++)r.push(a[t+s]);return r.every((e=>!1===e))?t:n(e)}return n(e)},l=e=>{let t=10*(e-1),r=Math.floor(100*Math.random()-t),s=[];for(let t=0;t<e;t++){let e=10*t;s.push(a[r+e])}return s.every((e=>!1===e))?r:l(e)};return{boardArray:a,setIsHorizontal:e=>e,ships:t,receiveAttack:e=>{if("miss"===a[e]||"hit"===a[e])return 0;if(!1===a[e])return a[e]="miss",r+=1,!1;if("string"==typeof a[e]){let r=parseInt(a[e].slice(-1)),s=parseInt(a[e].slice(-2,-1));return t[s].hit(r),a[e]="hit",!0}},getMissedCount:()=>r,allShipsSunk:()=>t.every((e=>e.isSunk())),placeShipsRandomly:i,aiPlaceShips:()=>{const e=[!0,!1];t.forEach(((t,r)=>{let a=Math.floor(Math.random()*e.length);i(t,r,e[a])}))}}})(e),n=[],l=[];t=!e;const o=e=>{let t,s;return s=0===l.length?Math.floor(100*Math.random()):l.pop(),t=e.receiveAttack(s),0===t?o(e):t?([s+1,s-1,s+10,s-10].filter((e=>{return!((t=e)>99||t<0||n.includes(t));var t})).forEach((e=>l.push(e))),a=t,r=s,n.push(r),!0):(a=t,r=s,n.push(r),!0)};return{isAi:()=>e,getTurn:()=>t,setTurn:e=>t=e,gameboard:i,computerMakeRandomPlay:o,getLastAiAttempt:()=>r,getLastResult:()=>a}},n=()=>{let e=!1,t=i(),r=i(!0);t.gameboard.aiPlaceShips(),r.gameboard.aiPlaceShips();let s,n=!1;const l=()=>t.gameboard.allShipsSunk()?(s="CPU",e=!0,!0):!!r.gameboard.allShipsSunk()&&(s="YOU",e=!0,!0),o=()=>{if(!t.getTurn()){r.computerMakeRandomPlay(t.gameboard);let e=r.getLastResult(),i=r.getLastAiAttempt();e?(a.playerSquares[i].classList.add("hit"),l()?a.info.textContent=s+" won":(t.setTurn(!0),a.info.textContent="Your turn")):(a.playerSquares[i].classList.add("miss"),t.setTurn(!0),a.info.textContent="Your turn")}l()},u=e=>{e.forEach((e=>{e.className="",e.hasAttribute("data-ship-id")&&e.removeAttribute("data-ship-id")}))};return{gameLoop:()=>{n||((console.log(a),{renderStart:(e,t)=>{e.gameboard.boardArray.forEach(((e,t)=>{e?"string"==typeof e&&(a.playerSquares[t].classList.add("shipPart"),a.playerSquares[t].dataset.shipId=e):a.playerSquares[t].classList.add("emptySquare")})),t.gameboard.boardArray.forEach(((e,t)=>{e?"string"==typeof e&&(a.aiSquares[t].classList.add("emptySquare"),a.aiSquares[t].dataset.shipId=e):a.aiSquares[t].classList.add("emptySquare")}))}}).renderStart(t,r),n=!0)},reset:()=>{u(a.aiSquares),u(a.playerSquares),e=!1,a.startBtn.style.display="inline-block",a.resetBtn.style.display="none",a.playerGrid.classList.remove("gameOver"),a.cpuGrid.classList.remove("gameOver"),a.info.textContent="Your turn"},checkForWin:l,playTurnAi:o,getGameOver:()=>e,playerAttack:i=>{if(!t.getTurn()||e)return;let n=r.gameboard.receiveAttack(i);if(0!==n)if(n){if(a.aiSquares[i].classList.add("hit"),t.setTurn(!1),!l())return a.info.textContent="Ai turn",setTimeout((()=>o()),1e3),!0;a.playerGrid.classList.add("gameOver"),a.cpuGrid.classList.add("gameOver"),a.info.textContent=s+" won"}else if(!n)return t.setTurn(!1),a.aiSquares[i].classList.add("miss"),a.info.textContent="Ai turn",setTimeout((()=>o()),1e3),!0}}};let l,o=Object.assign(a);function u(e){for(let t=0;t<100;t++){let r=document.createElement("div");r.dataset.id=t,e.appendChild(r)}}u(a.playerGrid),u(a.cpuGrid),o.aiSquares=document.querySelectorAll(".cpuGrid div"),o.playerSquares=document.querySelectorAll(".playerGrid div"),a.aiSquares.forEach((e=>{e.addEventListener("click",(e=>{l.playerAttack(+e.target.dataset.id)}))})),a.resetBtn.addEventListener("click",(e=>l.reset())),o.startBtn.addEventListener("click",(e=>{l=n(),l.gameLoop(),o.startBtn.style.display="none",o.resetBtn.style.display="inline-block"}))}},t={};function r(a){if(t[a])return t[a].exports;var s=t[a]={exports:{}};return e[a](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(489)})();