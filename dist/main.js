(()=>{"use strict";var e={489:(e,t,r)=>{r.d(t,{H:()=>o});const a={playerGrid:document.querySelector(".playerGrid"),playerSquares:document.querySelectorAll(".playerGrid div"),aiSquares:document.querySelectorAll(".cpuGrid div"),cpuGrid:document.querySelector(".cpuGrid"),startBtn:document.querySelector("#startBtn"),info:document.querySelector(".info"),resetBtn:document.getElementById("resetBtn")},n=e=>{const t=new Array(e).fill(!1);return{getLength:()=>e,hit:e=>(t[e]=!0,t),isSunk:()=>t.every((e=>e)),getHitArray:()=>t}},s=(e=!1)=>{let t,r,a,s=((e=!1)=>{const t=[];let r=0;for(let e=1;e<6;e++)t.push(n(e));let a=new Array(100).fill(!1);const s=(e,t,r=!0)=>{let n,s=e.getLength();if(r){let e;n=i(s);for(let r=0;r<s;r++)e=n+r+"-"+t+r,a[n+r]=e,e=""}else{let e;n=o(s);for(let r=0;r<s;r++){let s=10*r;e=n+s+"-"+t+r,a[n+s]=e,e=""}}},i=e=>{let t=Math.floor(100*Math.random()),r=[];if(t%10+e<=10){for(let n=0;n<e;n++)r.push(a[t+n]);return r.every((e=>!1===e))?t:i(e)}return i(e)},o=e=>{let t=10*(e-1),r=Math.floor(100*Math.random()-t),n=[];for(let t=0;t<e;t++){let e=10*t;n.push(a[r+e])}return n.every((e=>!1===e))?r:o(e)};return{boardArray:a,setIsHorizontal:e=>e,ships:t,receiveAttack:e=>{if("miss"===a[e]||"hit"===a[e])return 0;if(!1===a[e])return a[e]="miss",r+=1,!1;if("string"==typeof a[e]){let r=parseInt(a[e].slice(-1)),n=parseInt(a[e].slice(-2,-1));return t[n].hit(r),a[e]="hit",!0}},getMissedCount:()=>r,allShipsSunk:()=>t.every((e=>e.isSunk())),placeShipsRandomly:s,aiPlaceShips:()=>{const e=[!0,!1];t.forEach(((t,r)=>{let a=Math.floor(Math.random()*e.length);s(t,r,e[a])}))}}})(e);t=!e;const i=e=>{let t,n=Math.floor(100*Math.random());return t=e.receiveAttack(n),0===t?i(e):(a=t,r=n,!0)};return{isAi:()=>e,getTurn:()=>t,setTurn:e=>t=e,gameboard:s,computerMakeRandomPlay:i,getLastAiAttempt:()=>r,getLastResult:()=>a}},i=()=>{let e=!1,t=s(),r=s(!0);t.gameboard.aiPlaceShips(),r.gameboard.aiPlaceShips();let n,i=!1;const o=()=>t.gameboard.allShipsSunk()?(n="CPU",e=!0,!0):!!r.gameboard.allShipsSunk()&&(n="YOU",e=!0,!0),l=()=>{if(!t.getTurn()){r.computerMakeRandomPlay(t.gameboard);let e=r.getLastResult(),s=r.getLastAiAttempt();e?(a.playerSquares[s].textContent="X",o()?a.info.textContent=n+" won":(t.setTurn(!0),a.info.textContent="Your turn")):(a.playerSquares[s].textContent="miss",t.setTurn(!0),a.info.textContent="Your turn")}o()},u=e=>{e.forEach((e=>{e.textContent="",e.classList.forEach((t=>{"gridDiv"!==t&&"string"==typeof t&&e.classList.remove(t)}))}))};return{gameLoop:()=>{i||((console.log(a),{renderStart:(e,t)=>{e.gameboard.boardArray.forEach(((e,t)=>{e?"string"==typeof e&&(a.playerSquares[t].classList.add("shipPart"),a.playerSquares[t].dataset.shipId=e):a.playerSquares[t].classList.add("emptySquare")})),t.gameboard.boardArray.forEach(((e,t)=>{e?"string"==typeof e&&(a.aiSquares[t].classList.add("shipPart"),a.aiSquares[t].dataset.shipId=e):a.aiSquares[t].classList.add("emptySquare")}))}}).renderStart(t,r),i=!0)},reset:()=>{u(a.aiSquares),u(a.playerSquares),a.startBtn.style.display="inline-block",a.resetBtn.style.display="none"},checkForWin:o,playTurnAi:l,getGameOver:()=>e,playerAttack:s=>{if(!t.getTurn()||e)return;let i=r.gameboard.receiveAttack(s);if(0!==i)if(i){if(a.aiSquares[s].textContent="X",t.setTurn(!1),!o())return a.info.textContent="Ai turn",setTimeout((()=>l()),1e3),!0;a.info.textContent=n+" won"}else if(!i)return t.setTurn(!1),a.aiSquares[s].textContent="miss",a.info.textContent="Ai turn",setTimeout((()=>l()),1e3),!0}}};let o,l=Object.assign(a);function u(e){for(let t=0;t<100;t++){let r=document.createElement("div");r.classList.add("gridDiv"),r.dataset.id=t,e.appendChild(r)}}u(a.playerGrid),u(a.cpuGrid),l.aiSquares=document.querySelectorAll(".cpuGrid div"),l.playerSquares=document.querySelectorAll(".playerGrid div"),a.aiSquares.forEach((e=>{e.addEventListener("click",(e=>{o.playerAttack(+e.target.dataset.id)}))})),a.resetBtn.addEventListener("click",(e=>o.reset())),l.startBtn.addEventListener("click",(e=>{o=i(),o.gameLoop(),l.startBtn.style.display="none",l.resetBtn.style.display="inline-block"}))}},t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(489)})();